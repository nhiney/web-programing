@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewBag.Title - ShoeStore Admin</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    
    <link href="~/Css/AdminStyle.css" rel="stylesheet" />
    @Styles.Render("~/Css/AdminStyle.css")
</head>

<body class="dark-mode">

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="logo">ShoeStore</div>

        <div class="user-box text-center">
            <img id="sidebarAvatar" src="@ViewBag.AdminAvatar" />
            <input type="file" id="sidebarUpload" accept="image/*" />
            <h5 class="mt-2">@ViewBag.AdminName</h5>
        </div>

        <div class="menu-title">Dashboard</div>
        <a href="@Url.Action("Index","Admin")"
           class="@(ViewBag.ActiveMenu=="Dashboard"?"active":"")">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>

        <div class="menu-title">Quản lý</div>
        <a href="@Url.Action("Users","Admin")"
           class="@(ViewBag.ActiveMenu=="Users"?"active":"")">
            <i class="bi bi-people"></i> Users
        </a>

        <a href="@Url.Action("Index","ProductAdmin")"
           class="@(ViewBag.ActiveMenu=="Products"?"active":"")">
            <i class="bi bi-bag"></i> Products
        </a>

        <a href="@Url.Action("Index","OrderAdmin")"
           class="@(ViewBag.ActiveMenu=="Orders"?"active":"")">
            <i class="bi bi-receipt"></i> Orders
        </a>

        <a href="@Url.Action("Create","ImportAdmin")"
           class="@(ViewBag.ActiveMenu=="Import"?"active":"")">
            <i class="bi bi-box-arrow-in-down"></i> Nhập hàng
        </a>

        <div class="menu-title">Hệ thống</div>
        <a href="@Url.Action("Logout","Account")">
            <i class="bi bi-door-open"></i> Logout
        </a>
    </div>

    <!-- Topbar -->
    <div class="topbar" id="topbar">
        <div class="d-flex align-items-center">
            <button id="toggleSidebar"><i class="bi bi-list"></i></button>

            <div class="search-box">
                <input type="text" placeholder="Search..." />
            </div>
        </div>

        <div class="top-icons">
            <i class="bi bi-envelope"></i>
            <i class="bi bi-bell"></i>
            <i class="bi bi-person-circle"></i>

            <i id="themeToggle" class="bi bi-brightness-high"></i>
        </div>
    </div>

    <!-- CONTENT -->
    <div class="content" id="content">
        @RenderBody()
    </div>

    <!-- ============================================================
         JS: Toggle Sidebar + Theme + Avatar Upload
    ============================================================ -->
    <script>
        const sidebar = document.getElementById("sidebar");
        const topbar = document.getElementById("topbar");
        const content = document.getElementById("content");

        document.getElementById("toggleSidebar").onclick = () => {
            sidebar.classList.toggle("collapsed");
            topbar.classList.toggle("collapsed");
            content.classList.toggle("collapsed");
        };

        const themeToggle = document.getElementById("themeToggle");
        themeToggle.addEventListener("click", () => {
            document.body.classList.toggle("light-mode");
            document.body.classList.toggle("dark-mode");
        });

        // Upload avatar preview
        document.getElementById("sidebarAvatar").onclick = () =>
            document.getElementById("sidebarUpload").click();

        document.getElementById("sidebarUpload").onchange = (e) => {
            const file = e.target.files[0];
            if (file) document.getElementById("sidebarAvatar").src = URL.createObjectURL(file);
        };
    </script>

</body>
</html>
